# LANraragiScrpit
Enhance the performance of LANraragi's Subfolders to Categories plugin for faster /增强 LANraragi归档插件的性能
# FolderToCat Plugin Enhancement

## 项目简介
这是对 LANraragi 的 FolderToCat 插件的增强版本。该插件可以将内容文件夹中的子文件夹自动转换为静态分类，使管理大量漫画更加便捷。

## 主要改进

### 1. 性能优化
- **文件ID缓存**
  - 利用 Redis 中的 `LRR_FILEMAP` 存储文件ID映射
  - 避免重复计算文件哈希值
  - 显著提升处理大量文件时的性能

### 2. 编码处理
- **改进中文支持**
  - 统一使用 `redis_decode` 处理分类名称
  - 添加文件名和目录名的编码一致性检查
  - 增加编码调试信息

### 3. 目录排除功能
- **灵活的排除机制**
  - 支持多个排除目录（逗号分隔）
  - 可排除任意层级的目录
  - 默认排除 thumb 目录

### 5. 日志系统
- **增强的日志记录**
  - 添加详细的调试信息
  - 记录编码相关问题
  - 提供处理统计信息

## 使用说明

### 参数配置
1. **删除现有分类**
   - 类型: 布尔值
   - 默认值: false
   - 说明: 是否在创建新分类前删除所有现有静态分类

2. **仅使用顶层目录**
   - 类型: 布尔值
   - 默认值: false
   - 说明: 是否只使用内容文件夹的直接子文件夹创建分类

3. **排除目录**
   - 类型: 字符串
   - 默认值: "thumb"
   - 说明: 要排除的目录列表，使用逗号分隔


## 注意事项
1. 建议定期备份数据库





